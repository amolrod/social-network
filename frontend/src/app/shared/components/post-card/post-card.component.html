<article class="post-card">
  <!-- Header del post -->
  <div class="post-header">
    <div class="user-info">
      <a [routerLink]="['/profile', post.user?.username]" class="user-avatar">
        <div class="avatar-circle">{{ userInitials }}</div>
      </a>
      <div class="user-details">
        <a [routerLink]="['/profile', post.user?.username]" class="user-name">
          {{ post.user?.fullName || 'Usuario' }}
        </a>
        <div class="post-meta">
          <span class="username">@{{ post.user?.username }}</span>
          <span class="separator">·</span>
          <span class="time">{{ getTimeAgo() }}</span>
        </div>
      </div>
    </div>

    @if (isOwnPost()) {
      <div class="post-menu">
        <button class="menu-btn" (click)="toggleMenu()" type="button">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="12" r="1" />
            <circle cx="12" cy="5" r="1" />
            <circle cx="12" cy="19" r="1" />
          </svg>
        </button>

        @if (showMenu()) {
          <div class="menu-dropdown">
            <button class="menu-item delete" (click)="onDelete()">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
              </svg>
              Eliminar
            </button>
          </div>
        }
      </div>
    }
  </div>

  <!-- Contenido del post -->
  <div class="post-content">
    <p class="post-text">{{ post.content }}</p>

    @if (post.mediaUrls && post.mediaUrls.length > 0) {
      <div class="post-media">
        <img [src]="post.mediaUrls[0]" [alt]="'Imagen del post'" class="post-image" />
      </div>
    }
  </div>

  <!-- Estadísticas -->
  <div class="post-stats">
    <span class="stat">{{ post.likesCount }} me gusta</span>
    <span class="separator">·</span>
    <span class="stat">{{ post.commentsCount }} comentarios</span>
  </div>

  <!-- Acciones -->
  <div class="post-actions">
    <button class="action-btn" [class.active]="post.isLiked" (click)="onLike()" type="button">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
      </svg>
      <span>Me gusta</span>
    </button>

    <button class="action-btn" type="button">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
      </svg>
      <span>Comentar</span>
    </button>

    <button class="action-btn" (click)="onShare()" type="button">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8M16 6l-4-4-4 4M12 2v13" />
      </svg>
      <span>Compartir</span>
    </button>
  </div>
</article>
